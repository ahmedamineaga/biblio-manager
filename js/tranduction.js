const translations = {
    fr: {
        app_title: "Gestion Bibliothèque",
        login_title: "Connexion",
        btn_login: "Se connecter",
        btn_logout: "Déconnexion",
        label_email: "Email",
        label_password: "Mot de passe",
        menu_dashboard: "Tableau de bord",
        menu_books: "Livres",
        menu_members: "Adhérents",
        title_dashboard: "Tableau de bord",
        title_books: "Gestion des Livres",
        title_members: "Gestion des Adhérents", 
        btn_new_book: "Ajouter Livre",
        btn_new_member: "Nouvel Adhérent", 
        table_title: "Titre",
        table_author: "Auteur",
        table_category: "Catégorie",
        table_status: "Statut",
        table_actions: "Actions",
        modal_book_title: "Livre",
        modal_member_title: "Adhérent", 
        label_title: "Titre",
        label_author: "Auteur",
        label_category: "Catégorie",
        label_name: "Nom", 
        label_phone: "Téléphone", 
        table_name: "Nom", 
        table_reg_date: "Date Inscription", 
        btn_save: "Enregistrer",
        cat_roman: "Roman",
        cat_science: "Science",
        msg_confirm: "Êtes-vous sûr ?",
        msg_invalid_credentials: "Identifiants invalides", 
        msg_welcome: "Bienvenue", 
        msg_saved: "Sauvegardé", 
        msg_deleted: "Supprimé!" ,

        //dashboard
        dashboard_total_books: "Total Livres",
        dashboard_adherants: "Adhérents",
        dashboard_emprunts: "Emprunts",

        //adherants
        adherants_email: "Email",
        adherants_tele: "Téléphone",
        // language names
        lang_fr: "Français",
        lang_en: "Anglais",
        lang_ar: "Arabe",

        // user page
        user_buy_books: "Acheter Livres",
        cart_title: "Panier",
        search_placeholder: "Rechercher par titre, auteur...",
        added_to_cart: "Ajouté au panier",
        cart_empty: "Panier vide",
        order_placed: "Commande passée!",
        please_login: "Veuillez vous connecter",
        please_login_user: "Veuillez vous connecter en tant qu'utilisateur",
        already_borrowed: "Déjà emprunté",
        book_borrowed: "Livre emprunté",
        checkout_label: "Commander",
        cart_nav: "Panier"
        ,
        btn_add_to_cart: "Ajouter au panier",
        btn_borrow: "Emprunter",

        user_titre: "Titre",
        user_author: "Auteur",
        user_price: "Prix",
        user_actions: "Actions",

        admin: "Administrator",

        table_email: "Email",
        table_phone: "Téléphone"

    },
    en: {
        app_title: "Library Manager",
        login_title: "Login",
        btn_login: "Login",
        btn_logout: "Logout",
        label_email: "Email",
        label_password: "Password",
        menu_dashboard: "Dashboard",
        menu_books: "Books",
        menu_members: "Members",
        title_dashboard: "Dashboard",
        title_books: "Books Management",
        title_members: "Members Management", 
        btn_new_book: "New Book",
        btn_new_member: "New Member", 
        table_title: "Title",
        table_author: "Author",
        table_category: "Category",
        table_status: "Status",
        table_actions: "Actions",
        modal_book_title: "Book",
        modal_member_title: "Member", 
        label_title: "Title",
        label_author: "Author",
        label_category: "Category",
        label_name: "Name", 
        label_phone: "Phone", 
        table_name: "Name", 
        table_reg_date: "Reg. Date", 
        btn_save: "Save",
        cat_roman: "Novel",
        cat_science: "Science",
        msg_confirm: "Are you sure?",
        msg_invalid_credentials: "Invalid credentials", 
        msg_welcome: "Welcome", 
        msg_saved: "Saved", 
        msg_deleted: "Deleted!",

        //dashboard
        dashboard_total_books: "Total Books",
        dashboard_adherants: "Members",
        dashboard_emprunts: "Borrows",

        //adherants
        adherants_email: "Email",
        adherants_tele: "Telephone",
        // language names
        lang_fr: "French",
        lang_en: "English",
        lang_ar: "Arabic",
        // user page
        user_buy_books: "Buy Books",
        cart_title: "Cart",
        search_placeholder: "Search by title, author...",
        added_to_cart: "Added to cart",
        cart_empty: "Cart is empty",
        order_placed: "Order placed!",
        please_login: "Please login",
        please_login_user: "Please login as a user",
        already_borrowed: "Already borrowed",
        book_borrowed: "Book borrowed",
        checkout_label: "Checkout",
        cart_nav: "Cart"
        ,
        btn_add_to_cart: "Add to cart",
        btn_borrow: "Borrow",

        user_titre: "Title",
        user_author: "Author",
        user_price: "Price",
        user_actions: "Actions",

        admin: "Administrator",

        table_email: "Email",
        table_phone: "Number"

    },
    ar: {
        app_title: "إدارة المكتبة",
        login_title: "تسجيل الدخول",
        btn_login: "دخول",
        btn_logout: "خروج",
        label_email: "البريد الإلكتروني",
        label_password: "كلمة المرور",
        menu_dashboard: "لوحة القيادة",
        menu_books: "الكتب",
        menu_members: "الأعضاء",
        title_dashboard: "لوحة القيادة",
        title_books: "إدارة الكتب",
        title_members: "إدارة الأعضاء", 
        btn_new_book: "كتاب جديد",
        btn_new_member: "عضو جديد", 
        table_title: "العنوان",
        table_author: "المؤلف",
        table_category: "التصنيف",
        table_status: "الحالة",
        table_actions: "إجراءات",
        modal_book_title: "كتاب",
        modal_member_title: "عضو",
        label_title: "العنوان",
        label_author: "المؤلف",
        label_category: "التصنيف",
        label_name: "الاسم",
        label_phone: "الهاتف",
        table_name: "الاسم",
        table_reg_date: "تاريخ التسجيل",
        btn_save: "حفظ",
        cat_roman: "رواية",
        cat_science: "علوم",
        msg_confirm: "هل أنت متأكد؟",
        msg_invalid_credentials: "بيانات الاعتماد غير صالحة",
        msg_welcome: "مرحباً",
        msg_saved: "تم الحفظ", 
        msg_deleted: "تم الحذف!",
        
        //dashboard
        dashboard_total_books: "إجمال الكتب",
        dashboard_adherants: "الأعضاء",
        dashboard_emprunts: "الإقتراضات",

        //adherants
        adherants_email: "البريد الإلكتروني",
        adherants_tele: "رقم الهاتف",
        // language names
        lang_fr: "الفرنسية",
        lang_en: "الإنجليزية",
        lang_ar: "العربية",
        // user page
        user_buy_books: "شراء الكتب",
        cart_title: "السلة",
        search_placeholder: "البحث بالعنوان أو المؤلف...",
        added_to_cart: "أضيف إلى السلة",
        cart_empty: "السلة فارغة",
        order_placed: "تم إتمام الطلب!",
        please_login: "يرجى تسجيل الدخول",
        please_login_user: "يرجى تسجيل الدخول كمستخدم",
        already_borrowed: "مستعار بالفعل",
        book_borrowed: "تم استعارة الكتاب",
        checkout_label: "الدفع",
        cart_nav: "السلة"
        ,
        btn_add_to_cart: "أضف إلى السلة",
        btn_borrow: "استعارة",

        user_titre: "العنوان",
        user_author: "المؤلف",
        user_price: "السعر",
        user_actions: "الإجراءات",

        admin: "مشرف",

        table_email: "الإيميل",
        table_phone: "رقم الهاتف"

    }
};
//export tranductions for adherants
window.translations = translations;

function applyLanguage(lang) {
    document.querySelectorAll('[i18n]').forEach(el => {
        const key = el.getAttribute('i18n');
        if (translations[lang] && translations[lang][key]) {
            el.textContent = translations[lang][key];
        }
    });

    // set placeholders for elements that have i18n-placeholder
    document.querySelectorAll('[i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('i18n-placeholder');
        if (translations[lang] && translations[lang][key]) {
            el.setAttribute('placeholder', translations[lang][key]);
        }
    });

    // update cart nav text if present
    const cartNavText = translations[lang] && translations[lang].cart_nav ? translations[lang].cart_nav : null;
    if (cartNavText) {
        const cartNav = document.getElementById('nav-cart');
        if (cartNav) {
            // preserve count if present
            const match = cartNav.textContent.match(/\((\d+)\)/);
            const count = match ? match[1] : '0';
            cartNav.innerHTML = `<i class="fa-solid fa-shopping-cart"></i> <span>${cartNavText} (${count})</span>`;
        }
    }

}